---
import { cn } from '@/lib/utils';
import FooterLink from './footer-link.astro';
import SocialLink from './social-link.astro';
import { sections, socialLinks } from '@/lib/constants';

interface Props {
  class?: string;
}

const { class: className } = Astro.props;
---

<footer
  class={cn(
    'border-t-2 border-base-content/20 bg-base-100 py-12 text-base-content',
    className
  )}
>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- Main Footer Content -->
    <div class="mb-12 grid grid-cols-1 gap-8 md:grid-cols-4 md:gap-12">
      <!-- Brand Section -->
      <div class="md:col-span-1">
        <a href="/" class="inline-block">
          <span
            class="font-jb text-base-content text-2xl font-extrabold tracking-tighter"
          >
            UIT Knowledge
          </span>
        </a>
        <p class="text-base-content/70 mt-4 text-sm">
          Tài liệu học tập cho sinh viên UIT.
        </p>
        <!-- Social Links (Refactored) -->
        <div class="mt-6 flex gap-4">
          {socialLinks.map((link) => <SocialLink {link} />)}
        </div>
      </div>

      <!-- Footer Sections -->
      {
        sections.map((section) => (
          <div>
            <h3 class="text-base-content mb-4 font-bold">{section.title}</h3>
            <ul class="space-y-3">
              {section.links.map((link) => (
                <li>
                  <FooterLink href={link.href} label={link.label} />
                </li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>

    <!-- Newsletter Section -->
    <div
      class="border-base-content/20 bg-base-200 rounded-lg border-2 px-6 py-8 md:px-8"
    >
      <div class="grid grid-cols-1 items-center gap-6 md:grid-cols-2">
        <div>
          <h3 class="text-base-content mb-2 text-xl font-bold">
            Đăng ký nhận tin
          </h3>
          <p class="text-base-content/70 text-sm">
            Nhận thông tin về tài liệu học tập mới nhất.
          </p>
        </div>
        <form class="flex flex-col gap-2 md:ml-auto md:flex-row">
          <input
            type="email"
            placeholder="Email của bạn"
            class="input w-full md:max-w-64"
            required
          />
          <button type="submit" class="btn btn-outline btn-primary">
            <span class="relative">Đăng ký</span>
          </button>
        </form>
      </div>
    </div>

    <!-- Bottom Footer -->
    <div
      class="border-base-content/20 mt-12 flex flex-col items-center justify-between gap-4 border-t-2 pt-8 md:flex-row"
    >
      <p class="text-base-content/70 text-sm">
        © 2025 UIT Knowledge. Tất cả quyền được bảo lưu.
      </p>
      <div class="flex gap-6">
        <a
          href="/privacy"
          class="text-base-content/70 hover:text-base-content text-sm transition-colors"
        >
          Chính sách bảo mật
        </a>
        <a
          href="/terms"
          class="text-base-content/70 hover:text-base-content text-sm transition-colors"
        >
          Điều khoản sử dụng
        </a>
      </div>
    </div>
  </div>
</footer>
